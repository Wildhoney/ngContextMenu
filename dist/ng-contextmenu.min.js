/*! ng-contextmenu by Adam Timberlake <adam.timberlake@gmail.com> created on 2015-03-29 */
!function(a){"use strict";var b=a.module("ngContextMenu",[]);b.factory("contextMenu",function(){var a={};return a.cancelIteration=1,a.isOpening=!1,a.attachedClick=!1,a.cancelAll=function(){a.cancelIteration++},a}),b.directive("contextMenu",["$window","$http","$interpolate","$compile","$templateCache","contextMenu",function(b,c,d,e,f,g){return{restrict:"EA",require:"?ngModel",scope:{include:"@contextMenu",model:"=ngModel"},controller:["$scope",function(a){a.template="",a.event=null,a.menu=null,a.throwException=function(a){throw"ngContextMenu: "+a+"."},a.cacheTemplate=function(b){c.get(b,{cache:f}).then(function(b){a.template=b.data}).catch(function(){a.throwException('Invalid context menu path: "'+b+'"')})},a.cancelOne=function(){a.menu&&(a.menu.remove(),a.event=null)}}],link:function(c,f,h){if(!g.attachedClick){var i=a.element(b.document.getElementsByTagName("html"));g.attachedClick=!0,i.bind("click",function(){return"click"===h.contextEvent&&g.isOpening?void(g.isOpening=!1):void c.$apply(g.cancelAll)})}c.cacheTemplate(c.include,c.model||{}),c.$watch(function(){return g.cancelIteration},c.cancelOne),c.render=function(b){if(b){b.preventDefault();var g=d(c.template)(c.model||{}),h=a.element(g),i=e(h)(a.extend(c.$parent,c.model));i.length>1&&c.throwException("Context menu is adding "+i.length+" child nodes"),f.append(i);var j=f[0],k=j.childNodes.length;c.menu=a.element(j.childNodes[k-1]);var l="translate("+b.clientX+"px, "+b.clientY+"px)";c.menu.css({transform:l}),c.event=b}},f.bind(h.contextEvent||"contextmenu",function(a){a.stopPropagation(),c.$apply(function(){g.cancelAll()}),c.render(a),g.isOpening=!0}),c.model&&c.$watch("model",function(){var a=c.event;c.cancelOne(),c.render(a)},!0)}}}])}(window.angular);